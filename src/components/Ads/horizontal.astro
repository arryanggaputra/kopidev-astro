---
const adClient = "ca-pub-9343099184243971";
const adSlot = "4126057001";
const adWidth = 728;
const adHeight = 90;
---

<div class="ad-container" style={`display: inline-block; width: ${adWidth}px; height: ${adHeight}px;`}>
  <ins
    class="adsbygoogle adsbygoogle-container"
    style={`display: inline-block; width: ${adWidth}px; height: ${adHeight}px;`}
    data-ad-client={adClient}
    data-ad-slot={adSlot}
  ></ins>
</div>

<script>
  (() => {
    const ref = document.querySelector('.adsbygoogle-container');
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          try {
            if (typeof window !== 'undefined') {
              (window as any).adsbygoogle = (window as any).adsbygoogle || [];
              (window as any).adsbygoogle.push({});
            }
          } catch (error) {
            console.error('Ad loading error:', error);
          }
        }
      },
      { threshold: 0.1 }
    );
    if (ref) observer.observe(ref);
  })();
</script>
</div>